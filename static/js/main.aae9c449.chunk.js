(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{27:function(e,t,n){},28:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(10),s=n.n(c),o=n(4),i=n(5),l=n(7),u=n(6),h=(n(27),n(28),n(0)),d=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={searchQuery:""},e.handleInputChange=function(t){e.setState({searchQuery:t.target.value})},e.handleSubmit=function(t){var n=e.props.onSubmit,a=e.state.searchQuery;t.preventDefault(),""!==a.trim()?(n(a),e.setState({searchQuery:""})):alert("please type your query")},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this.state.searchQuery,t=this.handleSubmit,n=this.handleInputChange;return Object(h.jsx)("header",{className:"Searchbar",children:Object(h.jsxs)("form",{className:"SearchForm",onSubmit:t,children:[Object(h.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(h.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(h.jsx)("input",{className:"SearchForm-input",type:"text",value:e,onChange:n,autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos"})]})})}}]),n}(a.Component),p=d,j=n(12),m=(n(30),n(21)),b=n.n(m),g=function(){function e(t,n){var a=this;Object(o.a)(this,e),this.searchImages=function(){var e="".concat(a.BASE_URL,"?q=").concat(a.searchQuery,"&page=").concat(a.page,"&key=").concat(a.API_KEY,"&image_type=photo&orientation=horizontal&per_page=").concat(a.perPage);return b.a.get(e).then((function(e){return e.data.hits})).catch((function(e){console.log(e)}))},this.BASE_URL=t,this.API_KEY=n,this._searchQuery="",this._page=1,this.perPage=12}return Object(i.a)(e,[{key:"searchQuery",get:function(){return this._searchQuery},set:function(e){return this._searchQuery=e}},{key:"page",get:function(){return this._page},set:function(e){return this._page+=e}},{key:"resetPage",value:function(){return this._page=1}}]),e}(),f=(n(49),function(e){var t=e.children;return Object(h.jsx)("ul",{className:"ImageGallery",children:t})}),y=(n(50),function(e){var t=e.searchResults,n=e.openModal;return Object(h.jsx)(h.Fragment,{children:t.length>0&&t.map((function(e){var t=e.id,a=e.webformatURL,r=e.tags;return Object(h.jsx)("li",{id:t,onClick:n,className:"ImageGalleryItem",children:Object(h.jsx)("img",{src:a,alt:r,className:"ImageGalleryItem-image"})},t)}))})}),O=(n(51),document.querySelector("#modal-wrapper")),v=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).handleKeyDown=function(t){"Escape"===t.code&&e.props.onCloseModal()},e.handleClickBackdrop=function(t){t.currentTarget===t.target&&e.props.onCloseModal()},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){return Object(c.createPortal)(Object(h.jsx)("div",{className:"Overlay",onClick:this.handleClickBackdrop,children:Object(h.jsx)("div",{className:"Modal",children:Object(h.jsx)("img",{src:this.props.src,alt:this.props.alt})})}),O)}}]),n}(a.Component),x=v,S=(n(52),function(e){var t=e.onClick;return Object(h.jsx)("div",{className:"button-wrapper",children:Object(h.jsx)("button",{type:"button",className:"Button",onClick:t,children:"Load more"})})}),I=n(22),k=n.n(I),w=(n(73),new g("https://pixabay.com/api/","23128758-78bb9bd788fc6e2a491c41576")),C=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={searchResults:[],status:"idle",largeImageId:null,isModalOpen:!1},e.findLargeImg=function(){var t=e.state,n=t.searchResults,a=t.largeImageId;return n.find((function(e){return e.id===a}))},e.openModal=function(t){e.setState({isModalOpen:!0,largeImageId:Number(t.currentTarget.id)})},e.closeModal=function(){e.setState({isModalOpen:!1})},e.onButtonClick=function(){w.page=1,w.searchImages().then((function(t){e.setState((function(e){return{searchResults:[].concat(Object(j.a)(e.searchResults),Object(j.a)(t)),status:"resolved"}}))})).then((function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})})).catch((function(t){console.log(t),e.setState({status:"rejected"})}))},e}return Object(i.a)(n,[{key:"componentDidUpdate",value:function(e,t){var n=this,a=this.props.searchQuery;e.searchQuery!==a&&(this.setState({status:"pending"}),w.searchQuery=a,w.searchImages().then((function(e){return n.setState({searchResults:e,status:"resolved"})})).catch((function(e){console.log(e),n.setState({status:"rejected"})})))}},{key:"render",value:function(){var e=this.state,t=e.searchResults,n=e.status,a=e.isModalOpen,r=e.largeImageId,c=this.openModal,s=this.onButtonClick,o=this.closeModal,i=this.findLargeImg,l=t.length>0&&t.length>=12;return"idle"===n?Object(h.jsx)("div",{className:"info-messages",children:Object(h.jsx)("p",{children:"Hello, I have a lot images for you. Just type your query to search form"})}):"pending"===n?Object(h.jsx)("div",{className:"loader-wrapper",children:Object(h.jsx)(k.a,{type:"TailSpin",color:"#00BFFF",height:120,width:120})}):"rejected"===n?Object(h.jsx)("div",{className:"info-messages",children:Object(h.jsx)("p",{children:"Error"})}):"resolved"===n?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(f,{children:Object(h.jsx)(y,{searchResults:t,openModal:c})}),l&&Object(h.jsx)(S,{onClick:s}),0===t.length&&Object(h.jsx)("div",{className:"info-messages",children:Object(h.jsx)("p",{children:"There are no images for your query"})}),a&&Object(h.jsx)(x,{largeImageId:r,onCloseModal:o,src:i().largeImageURL,alt:i().tags})]}):void 0}}]),n}(a.Component),N=C,Q=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={searchQuery:""},e.handleFormSubmit=function(t){e.setState({searchQuery:t})},e}return Object(i.a)(n,[{key:"render",value:function(){var e=this.handleFormSubmit,t=this.state.searchQuery;return Object(h.jsxs)("div",{children:[Object(h.jsx)(p,{onSubmit:e}),Object(h.jsx)(N,{searchQuery:t})]})}}]),n}(a.Component),M=Q;s.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(M,{})}),document.getElementById("root"))}},[[74,1,2]]]);
//# sourceMappingURL=main.aae9c449.chunk.js.map